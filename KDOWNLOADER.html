<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KDOWNLOADER | Quick Hub</title>
    <style>
        :root { --primary: #1a73e8; --dark: #202124; --light: #f8f9fa; }
        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: var(--light); color: var(--dark); }
        
        /* Search Bar at Top */
        header { background: var(--primary); padding: 20px; color: white; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .search-area { display: flex; max-width: 600px; margin: 10px auto 0; }
        #searchInput { flex: 1; padding: 12px; border: none; border-radius: 5px 0 0 5px; outline: none; font-size: 16px; width: 100%; }
        #searchBtn { padding: 12px 20px; border: none; background: #0d47a1; color: white; border-radius: 0 5px 5px 0; cursor: pointer; font-weight: bold; }

        /* Buttons Area */
        .nav-container { max-width: 800px; margin: 20px auto; padding: 0 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .action-btn { padding: 15px; border: none; border-radius: 8px; cursor: pointer; text-decoration: none; text-align: center; font-weight: bold; font-size: 16px; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
        .home-btn { background: white; color: var(--primary); border: 2px solid var(--primary); }
        .ideas-btn { background: #34a853; color: white; }
        .action-btn:hover { opacity: 0.9; transform: scale(0.98); }

        /* File List */
        .file-list-container { max-width: 800px; margin: 0 auto; padding: 15px; }
        .file-item { background: white; padding: 20px; margin-bottom: 12px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .file-name { font-weight: 600; color: #3c4043; font-size: 17px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 70%; }
        .dl-link { background: var(--primary); color: white; padding: 10px 18px; border-radius: 5px; text-decoration: none; font-weight: bold; font-size: 14px; white-space: nowrap; }
        
        #status-msg { text-align: center; padding: 20px; color: #5f6368; font-weight: 500; }
    </style>
</head>
<body>

<header>
    <div style="text-align:center; font-size: 22px; font-weight: bold;">KDOWNLOADER</div>
    <div class="search-area">
        <input type="text" id="searchInput" placeholder="Search file names...">
        <button id="searchBtn" onclick="searchFiles()">Search</button>
    </div>
</header>

<div class="nav-container">
    <button class="action-btn home-btn" onclick="window.location.reload()">üè† Home</button>
    <a href="https://mail.google.com/mail/?view=cm&fs=1&to=kapilansh1245@gmail.com&su=App%20Feedback%20and%20Ideas" target="_blank" class="action-btn ideas-btn">üí° Give Ideas</a>
</div>

<div class="file-list-container">
    <div id="status-msg">Connecting to Kapilansh's Cloud...</div>
    <div id="fileDisplay"></div>
</div>

<script>
    // --- EDITED FOR YOUR ACCOUNT ---
    const GITHUB_USER = "Kapilansh"; 
    const REPO_NAME = "KDOWNLOADER";
    // -------------------------------

    let masterFileList = [];

    async function fetchFiles() {
        const status = document.getElementById('status-msg');
        try {
            const apiURL = `https://api.github.com/repos/${GITHUB_USER}/${REPO_NAME}/contents/`;
            const response = await fetch(apiURL);
            
            if (!response.ok) throw new Error("Repository not found or private");
            
            const data = await response.json();
            
            // Filters out index.html so you don't download your own code
            masterFileList = data.filter(item => item.type === 'file' && item.name !== 'index.html');
            
            if (masterFileList.length === 0) {
                status.innerHTML = "Your folder is empty. Upload files to GitHub to see them here!";
            } else {
                status.innerHTML = `Found ${masterFileList.length} files.`;
                renderList(masterFileList);
            }
        } catch (err) {
            status.innerHTML = `<span style="color:red">Error: ${err.message}.<br>Make sure repo 'KDOWNLOADER' is Public.</span>`;
        }
    }

    function renderList(list) {
        const display = document.getElementById('fileDisplay');
        display.innerHTML = "";
        
        list.forEach(file => {
            const row = document.createElement('div');
            row.className = 'file-item';
            row.innerHTML = `
                <span class="file-name">${file.name}</span>
                <a href="${file.download_url}" class="dl-link" download>Download</a>
            `;
            display.appendChild(row);
        });
    }

    function searchFiles() {
        const query = document.getElementById('searchInput').value.toLowerCase();
        const results = masterFileList.filter(f => f.name.toLowerCase().includes(query));
        
        const status = document.getElementById('status-msg');
        status.innerHTML = `Results for "${query}": ${results.length} found.`;
        renderList(results);
    }

    // Runs automatically when the page opens
    window.onload = fetchFiles;
</script>

</body>
</html>